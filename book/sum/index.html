
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Think in Recursion book by F. Jin, covers recursion problems such as sum, fibonacci, climb stair, bucket fill, permutation and etc.">
    <meta name="keywords" content="Recursion, Javascript, Haskell, Fibonacci, Permutation">
    <meta name="author" content="Fang Jin">
    <link rel="icon" type="image/x-icon" href="/book/favicon/favicon.ico">
    <link rel="manifest" href="/book/favicon/manifest.json">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,400;0,700;1,300;1,400&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400&display=swap" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400&display=swap" rel="stylesheet" type="text/css">
    <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">
    <link rel="stylesheet" href="../bundle.css">
    <title>Sum</title>
  </head>
  <body id="top">
    <nav>
  <div class="navbar">
    <div class="container nav-container">
      <input class="checkbox" type="checkbox" name="" id="">
      <div class="hamburger-lines">
        <span class="line line1"></span>
        <span class="line line2"></span>
        <span class="line line3"></span>
      </div>
      <div class="logo">
        <p><a href="/book/">Think in Recursion</a></p>
      </div>
      <div class="menu-items"><li>
          <a href="/book/sum/">1. Sum</a>
        </li><li>
          <a href="/book/callstack/">2. Call stack</a>
        </li><li>
          <a href="/book/factorial/">3. Factorial</a>
        </li><li>
          <a href="/book/fibonacci/">4. Fibonacci</a>
        </li><li>
          <a href="/book/stairs/">5. Stairs</a>
        </li><li>
          <a href="/book/paint/">6. Paint</a>
        </li><li>
          <a href="/book/permute/">7. Permute</a>
        </li><li>
          <a href="/book/queens/">8. Queens</a>
        </li><li>
          <a href="/book/path/">9. Path I</a>
        </li><li>
          <a href="/book/path2/">10. Path II</a>
        </li></div>
    </div>
  </div>
</nav>

    <main><p class="chapter-number">1</p>
<h1>Sum</h1>
<blockquote>
<p>Tom: &quot;Miss Sophia wants us to add numbers from 0 to 5.&quot;<br>
Me: &quot;Oh yeah, 0 + 1 = 1; 1 + 2 = 3; and ...&quot;<br>
Tom: &quot;Wait, wait, I know the sum from 0 to 4. It's 10.&quot;<br>
Me: &quot;Okay, in that case, the answer is 15 then.&quot;<br>
Tom &amp; Me: &quot;Oh yeah!&quot;</p>
</blockquote>
<p>Say we want to find out the sum of a list of number from <code>0</code> to <code>n</code>, we start to write an algorithm.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token constant">M</span> <span class="token operator">+</span> n<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>What is <code>M</code> ?</p>
<blockquote>
<p>Me: &quot;Did you forget something? What is M?&quot;<br>
Tom: &quot;Oh, I forgot to tell you M is sum(n - 1)!&quot;<br>
Me: &quot;What?&quot;<br>
Tom: &quot;What's the matter?&quot;<br>
Me: &quot;... Nothing.&quot;</p>
</blockquote>
<p>Replacing <code>M</code> with <code>sum(n-1)</code>, like someone knew <code>sum(n-1)</code>.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">sum</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> n<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<blockquote>
<p>Me: &quot;I don't really think this would work. &quot;<br>
Tom: &quot;If I know sum(4), I can tell you sum(5).&quot;<br>
Me: &quot;How could I know sum(4) first?&quot;<br>
Tom: &quot;Well, if you can tell me what is sum(3).&quot;<br>
Me: &quot;How am I supposed to tell you sum(3)?&quot;<br>
Tom: &quot;I know what is sum(0).&quot;.<br>
Me &amp; Tom: &quot;That is zero!&quot;<br>
Tom: &quot;In that case, I know sum(1) and ...&quot;<br>
Me &amp; Tom: &quot;Then I know sum(5).&quot;</p>
</blockquote>
<p>Adding <code>sum(0)</code> that we know from the beginning.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">sum</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> n<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Run it.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token operator">></span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token number">15</span></code></pre>
<p>It's <code>15</code>, just great!</p>
<blockquote>
<p>Me: &quot;I didn't expect we can get this far.&quot;<br>
Tom: &quot;Me either.&quot;<br>
Me: &quot;So what is this all about?&quot;<br>
Tom: &quot;I don't know. Some kinda of Recursion?&quot;</p>
</blockquote>
<p>Recursion it is.</p>
<h2>Function instance</h2>
<p>What is a recursion?</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">sum</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> n<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>In the code, it's a function named <code>sum</code>. Inside, it calls a function named <code>sum</code>. So it's a function calling itself basically.</p>
<p>When a function keeps calling itself, each one that is launched is called a function instance, such as <code>sum(n)</code> and <code>sum(n-1)</code>. Each function instance can be only distinguished by the argument passed to the function, such as <code>n</code> and <code>n-1</code>. The argument essentially becomes the name of the function instance.</p>
<p>What is the difference between each function instance, say between <code>sum(n)</code> and <code>sum(n-1)</code>? It’s subtle. They follow the same logic from the same function body. On the other hand, each instance carries slight variations due to conditional statement defined inside . In our case, <code>sum(5)</code> is quite similar to <code>sum(4)</code>, but different from <code>sum(0)</code>. Since the function uses a <code>if</code> statement for <code>sum(0)</code>.</p>
<p>We call <code>sum(0)</code> instance a boundary. When the code reaches there, it has to go back quickly to where it was called. It behaves almost as if it's not called. A instance serving as a boundary is equally as important as other instances. Because without the boundary, the problem is unbounded, thus un-solvable.</p>
<p>Any function’s job is to run through some calculations and return the result. During the visit of the function instance, it maintain its active status. The total number of the active instances fluctuates and could reach any number during the run.</p>
<p>The function instance and the boundary are two key elements of a recursion. We’ll come back to them often throughout this book.</p>
<h2>Recursion the right way</h2>
<p>One of the challenge of learning recursion is that we are very used to the classical way of doing things using a <em>for</em> loop. When it comes to the recursion, things seem to be quite unmanageable. Suddenly we seem to run out of steam in controlling things precisely.</p>
<p>If you ever read through the recursion analysis as in most of textbooks, you can find them time-consuming and mind-boggling. So I won't mention them here, since I don't want you to think recursion is difficult, especially when you are new to this subject.</p>
<blockquote>
<p>First impression is important, and I don't want to leave you with bad one.</p>
</blockquote>
<p>Instead, I'll introduce you the right way of looking at recursion. We'll go from a natural way of how we come to the recursion at the first place. In a sense, I want you to relax a bit and learn something new. If you happen to know the classical way, please pretend you don't know for the first few chapters.</p>
<blockquote>
<p>Tom: “We should read the function line by line.”<br>
Me: “Isn’t this what we just did?”<br>
Tom: “No, I didn’t mean by the compiler.”<br>
Me: “I’m confused, what you mean?”<br>
Tom: “I mean by us.”</p>
</blockquote>
<p>Let’s walk through the recursive function we wrote. What does the function do after we call it?</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">sum</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> n<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Say we start at one function instance <code>n</code>.</p>
<pre><code>sum(n) -&gt; sum(n - 1) + n
</code></pre>
<p>Quickly it asks us to call <code>sum(n-1)</code> and then add the result to <code>n</code>.</p>
<pre><code>sum(n) -&gt; abc(n - 1) + n
</code></pre>
<p>Pretend we replace the <code>sum(n-1)</code> by <code>abc(n-1)</code> for a second. What this <code>abc</code> function does is to return us the result of <code>sum(n-1)</code>. This is the case when <code>n</code> is not <code>0</code>.</p>
<pre><code>sum(n) -&gt; 0
</code></pre>
<p>When n is <code>0</code>, we return the number <code>0</code> right away.</p>
<p>Now let’s organize our thoughts a bit.</p>
<blockquote>
<p>Tom: “How do you feel?”<br>
Me: “I don’t know. Aren’t they same?”<br>
Tom: “Have you gone through every line?”<br>
Me: “Yes, but I felt I did little.”<br>
Tom: “Nice, isn’t it?”</p>
</blockquote>
<p>We walk you through the logic of the code as we normally do to any piece of computer code. The thing we don't want you do is digging into each instance function. Because we believe that work is the compiler's job.</p>
<p><strong>We don't go through the detail of each function instance, instead we take for granted what's returned from it, and move on to the next line of the code.</strong></p>
<p>Each of us only has one brain, we just don't have enough brain power to absorb the details of all function instances at the same time.</p>
<p>For instance, when I ask you to trace through 5 function calls, you find it inspiring and encouraging; if I raise the number to 23, you might start to find it tedious but still be proud afterwards; now if I raise it to 178, you’d give up in no time. Don't you think we should develop a more consistent way of reasoning when things scale up?</p>
<p>Therefore this book strongly suggests we don't look at the recursion as the compiler does. Instead, we approach the problem as natural as possible. In the end, no matter how large the size of the problem is, we stay calm and focus on the intrinsic of the problem.</p>
<h2>Running time measurement</h2>
<p><img src="../images/running.png" alt="Running time"></p>
<p>In this book, we use recursion to write computer algorithm. Any algorithm book would tell you how to measure algorithm's success on the front.</p>
<p>There is no exception here.</p>
<p>In computer science, one of the key metric of a computer algorithm, is its running time, expressed by the notation <code>O</code>. We call it the big <code>O</code>. To name a few popular running time expressions.</p>
<pre><code>O(n)
O(n^2)
O(2^n)
O(log(n))
O(n!)
</code></pre>
<p>The number <code>n</code> corresponds to the size of the problem. Taking <code>O(n)</code> as an example, it means the running time is in linear relationship against <code>n</code>, when <code>n</code> increases, it increases the running time linearly.</p>
<p>Notice there's no coefficient or additional terms in any of these expressions. Because the order of running time has no interest at the difference between <code>O(n)</code>, <code>O(2n)</code>, or <code>O(n+1)</code>, to the running time, all these expressions increase linearly with <code>n</code>. So they all reduces to <code>O(n)</code> expression. Remember big <code>O</code> only tracks the fastest growing order.</p>
<p>Another way to look at the big <code>O</code> is that the unit time for each problem varies. This problem might be doing addition operation, while another problem might be doing multiplication. Even though we know multiplication is slower than addition, we don't take that into consideration. Instead we want to factor that operation out and focus on how many times each operation has been performed.</p>
<p>Given couple of problems with the following order, can we figure out which one runs faster?</p>
<pre><code>O(1)
O(n)
O(n^2)
</code></pre>
<p>Hard to say. Because the order of running time does not measure the exact time. We can't be sure whether the unit time for each problem is the same. However, for the same problem, when there's one unit time, if one algorithm gives <code>O(n)</code> and another one gives <code>O(n^2)</code>, then we know the former should be more performant. Because the linear form of running time grows slower than the quadratic form of running time when the problem scales up with increasing <code>n</code>.</p>
<p>Ok, now we know what is the big <code>O</code>, let's think about what’s the running time for the <code>sum</code> code we wrote?</p>
<p>Say the time spent on running each function instance the unit time, considering it basically does the addition of two numbers, we can count how many times a function instance is called.</p>
<pre><code> start
  ---
   n
  n-1
   .
   .
   .
   1
   0
  ---
boundary
</code></pre>
<p>To know how many instances are visited, imagine we start from the first function instance <code>n</code>, and then move into <code>n-1</code>, and continues until it reaches <code>0</code> which is our boundary. It's in total <code>n+1</code> instances.</p>
<p>Thus the running time of our algorithm is said to be <code>O(n)</code>, meaning the running time is linearly proportional to <code>n</code>. If <code>sum(1)</code> takes 1 microsecond in a real run, then we expect <code>sum(5)</code> should spend approximately around 5 microseconds. Of course 5 microseconds isn’t an accurate measurement, but we don’t expect it to take more than 10 microseconds, because that would break the <code>O(n)</code> analysis.</p>
<h2>Run it!</h2>
<p>We have the algorithm written, and we know how fast it runs against <code>n</code>, let's run it.</p>
<pre><code>&gt; sum(5)
15

&gt; sum(10)
55

&gt; sum(100)
5050

&gt; sum(1000)
500500
</code></pre>
<p>Great! Don't you know the sum takes shape of a pattern <code>5x5x</code> for each magnitude of <code>n</code>. Guess what is <code>sum(10000)</code>?</p>
<pre><code>&gt; sum(1000)
500500
</code></pre>
<p>Yes, it's <code>50005000</code>.</p>
</main>
    <footer>
  <div>
    <p>
      <a href="https://www.freepik.com/free-vector/brain-icons-flat_4663387.htm#query=brain&position=15&from_view=search&track=sph&uuid=c43d2599-7e99-42e3-9d6b-4cc4b554107c?log-in=google">
        Image by macrovector_official</a>
      on Freepik
    </p>
    <p>
      © Think in Recursion 2023 - 2024
      <a href="https://www.linkedin.com/in/windmaomao/">F. Jin</a>
    </p>
  </div>
  <p>
    <a href="#top">Back to top</a>
  </p>
</footer>
 <script type="module" async="">import mermaid from "https://unpkg.com/mermaid@10/dist/mermaid.esm.min.mjs";document.addEventListener('DOMContentLoaded', mermaid.initialize({"loadOnSave":true}));</script>
  </body>
</html>
